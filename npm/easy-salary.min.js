!function(a,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Salary=n():a.Salary=n()}(this,(function(){return function(a){var n={};function e(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return a[t].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=a,e.c=n,e.d=function(a,n,t){e.o(a,n)||Object.defineProperty(a,n,{enumerable:!0,get:t})},e.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},e.t=function(a,n){if(1&n&&(a=e(a)),8&n)return a;if(4&n&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&n&&"string"!=typeof a)for(var r in a)e.d(t,r,function(n){return a[n]}.bind(null,r));return t},e.n=function(a){var n=a&&a.__esModule?function(){return a.default}:function(){return a};return e.d(n,"a",n),n},e.o=function(a,n){return Object.prototype.hasOwnProperty.call(a,n)},e.p="",e(e.s=0)}([function(a,n,e){"use strict";function t(a){var n=a.insuranceAndFundBase,e=a.insuranceAndFundRate,t=a.housingFundRange,r={totalFund:0};for(var u in e){var o=u,i=n;"housingFund"!==o&&"supplementaryFund"!==o||(n<t.min?i=t.min:n>t.max&&(i=t.max));var s=e[o]*i;r[o]=s,r.totalFund+=s}return r.totalHousingFund=r.housingFund+r.supplementaryFund,r}function r(a,n){for(var e=0;e<n.length;e++){var t=n[e],r=t.value,u=t.rate,o=t.deduction;if(0===r||r>a)return{rate:u,deduction:o}}return{rate:0,deduction:0}}function u(a){return a.reduce((function(a,n){return a+n}),0)}function o(a){var n=a.accumulatedTaxableIncome,e=a.totalPersonalTncomeTax,t=function(a){return r(a,[{value:36e3,rate:.03,deduction:0},{value:144e3,rate:.1,deduction:2520},{value:3e5,rate:.2,deduction:16920},{value:42e4,rate:.25,deduction:31920},{value:66e4,rate:.3,deduction:52920},{value:96e4,rate:.35,deduction:85920},{value:0,rate:.45,deduction:181920}])}(n);return n*t.rate-t.deduction-0-e}function i(a){var n=a.salary,e=a.yearEndAwards,t=a.yearEndAwardsNumber,u=a.startingSalary,o=e||n*t,i=n>u?o:o-(u-n),s=r(i/12,[{value:3e3,rate:.03,deduction:0},{value:12e3,rate:.1,deduction:210},{value:25e3,rate:.2,deduction:1410},{value:35e3,rate:.25,deduction:2660},{value:55e3,rate:.3,deduction:4410},{value:8e4,rate:.35,deduction:7360},{value:0,rate:.45,deduction:15160}]),d=i*s.rate-s.deduction;return{awardsPreTax:o,awardsTax:d,awardsAfterTax:o-d}}function s(a){for(var n=a.value,e=a.separateTax,t=a.vesting,r=a.buybackMonth,u=function(a){if("number"==typeof a){var n=a;(a=new Array(12)).fill(n/12)}else for(var e=a.length;e<12;e++)a[e]=0;return a}(t),o=0,i=0;i<r&&i<12;i++)o+=u[i];var s=n*(o=Math.min(o,100))/100,d=0,c=0;return e?d=.2*s:c=s,{stockOptionPreTax:s,stockOptionTax:d,stockOptionAfterTax:s-d,stockOptionIncome:c,stockOptionBuybackMonth:r}}function d(a){var n=a.salary,e=a.specialAdditionalDeduction,r=a.yearEndAwardsNumber,d=a.yearEndAwards,c=a.insuranceAndFundBase,l=a.startingSalary,f=a.insuranceAndFundRate,y=a.insuranceAndFundRateOfCompany,p=a.signingBonus,x=a.housingFundRange,A=a.stockOption;p=function(a){if("number"==typeof a){var n=a;(a=new Array(12)).fill(n)}else for(var e=a.length;e<12;e++)a[e]=0;return a}(p);var m=s(A);!A.separateTax&&m.stockOptionIncome>0&&(p[Math.min(Math.max(A.buybackMonth-1,0),11)]+=m.stockOptionIncome);var v=function(a){var n=a.salary,e=a.insuranceAndFundBase,t=a.insuranceAndFundRate,r=a.insuranceAndFundRateOfCompany;e||(e=n);var u=Object.assign({},r);-1===u.housingFund&&(u.housingFund=t.housingFund);-1===u.supplementaryFund&&(u.supplementaryFund=t.supplementaryFund);return{insuranceAndFundBase:e,insuranceAndFundRateOfCompany:u}}({salary:n,insuranceAndFundBase:c,insuranceAndFundRate:f,insuranceAndFundRateOfCompany:y});c=v.insuranceAndFundBase,y=v.insuranceAndFundRateOfCompany;var T,F=i({salary:n,yearEndAwards:d,yearEndAwardsNumber:r,startingSalary:l}),g=F.awardsPreTax,h=F.awardsTax,b=F.awardsAfterTax,O=t({insuranceAndFundBase:c,insuranceAndFundRate:f,housingFundRange:x}),w=t({insuranceAndFundBase:c,insuranceAndFundRate:y,housingFundRange:x}),k=function(a){for(var n=a.salary,e=a.signingBonus,t=a.startingSalary,r=a.specialAdditionalDeduction,i=a.totalFund,s=a.awardsAfterTax,d=[],c=[],l=0,f=0,y=1;y<13;y++){var p=e[y-1]||0,x=o({accumulatedTaxableIncome:y*n+(f+=p)-0-t*y-i*y-r*y-0,totalPersonalTncomeTax:l}),A=n+p-i-x;d.push(A),c.push(x),l+=x}var m=u(d),v=u(c);return{salaryAfterTax:d,salaryTax:c,totalSalaryAfterTaxExcludeAwards:m,salaryTotalTax:v,totalSalaryAfterTax:m+s}}({salary:n,signingBonus:p,startingSalary:l,specialAdditionalDeduction:e,totalFund:O.totalFund,awardsAfterTax:b}),R=k.salaryAfterTax,S=k.salaryTax,P=k.totalSalaryAfterTaxExcludeAwards,j=k.salaryTotalTax,B=k.totalSalaryAfterTax;return{salaryBase:n,salaryPreTax:p.map((function(a){return a+n})),salaryAfterTax:R,salaryAfterTaxAvg:(T=R,u(T)/T.length),salaryTax:S,salaryTotalTax:j,totalSalaryAfterTaxExcludeAwards:P,totalSalaryPreTax:g+12*n+u(p)+(A.separateTax?m.stockOptionPreTax:0),totalSalaryAfterTax:B+(A.separateTax?m.stockOptionAfterTax:0),insuranceAndFund:O,insuranceAndFundOfCompany:w,awardsPreTax:g,awardsTax:h,awardsAfterTax:b,stockOptionPreTax:m.stockOptionPreTax,stockOptionTax:m.stockOptionTax,stockOptionAfterTax:m.stockOptionAfterTax}}e.r(n);var c=function(){function a(a){for(var n in void 0===a&&(a={}),this.salary=1e4,this.specialAdditionalDeduction=0,this.yearEndAwardsNumber=2,this.yearEndAwards=0,this.insuranceAndFundBase=0,this.startingSalary=5e3,this.insuranceAndFundRate={pension:.08,medicalInsurance:.02,unemploymentInsurance:.005,maternityInsurance:0,injuryInsurance:0,housingFund:.07,supplementaryFund:.05},this.insuranceAndFundRateOfCompany={pension:.21,medicalInsurance:.11,unemploymentInsurance:.015,maternityInsurance:.01,injuryInsurance:.01,housingFund:-1,supplementaryFund:-1},this.signingBonus=[],this.housingFundRange={min:2590,max:34188},this.stockOption={value:0,separateTax:!1,vesting:[],buybackMonth:12},a){var e=n;"object"==typeof a[e]?Object.assign(this[e],a[e]):void 0!==a[e]&&(this[e]=a[e])}}return a.prototype.calculate=function(){return this.salaryResult=d(this),this.salaryResult},a}();n.default=c}]).default}));