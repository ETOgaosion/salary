!function(e){var n={};function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(a,r,function(n){return e[n]}.bind(null,r));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";function a(e){var n=e.insuranceAndFundBase,t=e.insuranceAndFundRate,a=e.housingFundRange,r={totalFund:0};for(var i in t){var o=i,s=n;"housingFund"!==o&&"supplementaryFund"!==o||(n<a.min?s=a.min:n>a.max&&(s=a.max));var u=t[o]*s;r[o]=u,r.totalFund+=u}return r.totalHousingFund=r.housingFund+r.supplementaryFund,r}function r(e,n){for(var t=0;t<n.length;t++){var a=n[t],r=a.value,i=a.rate,o=a.deduction;if(0===r||r>e)return{rate:i,deduction:o}}return{rate:0,deduction:0}}function i(e){return e.reduce((function(e,n){return e+n}),0)}function o(e){var n=e.accumulatedTaxableIncome,t=e.totalPersonalTncomeTax,a=function(e){return r(e,[{value:36e3,rate:.03,deduction:0},{value:144e3,rate:.1,deduction:2520},{value:3e5,rate:.2,deduction:16920},{value:42e4,rate:.25,deduction:31920},{value:66e4,rate:.3,deduction:52920},{value:96e4,rate:.35,deduction:85920},{value:0,rate:.45,deduction:181920}])}(n);return n*a.rate-a.deduction-0-t}function s(e){var n=e.salary,t=e.yearEndAwards,a=e.yearEndAwardsNumber,i=e.startingSalary,o=t||n*a,s=n>i?o:o-(i-n),u=r(s/12,[{value:3e3,rate:.03,deduction:0},{value:12e3,rate:.1,deduction:210},{value:25e3,rate:.2,deduction:1410},{value:35e3,rate:.25,deduction:2660},{value:55e3,rate:.3,deduction:4410},{value:8e4,rate:.35,deduction:7360},{value:0,rate:.45,deduction:15160}]),c=s*u.rate-u.deduction;return{awardsPreTax:o,awardsTax:c,awardsAfterTax:o-c}}function u(e){for(var n=e.value,t=e.separateTax,a=e.vesting,r=e.buybackMonth,i=function(e){if("number"==typeof e){var n=e;(e=new Array(12)).fill(n/12)}else for(var t=e.length;t<12;t++)e[t]=0;return e}(a),o=0,s=0;s<r&&s<12;s++)o+=i[s];var u=n*(o=Math.min(o,100))/100,c=0,d=0;return t?c=.2*u:d=u,{stockOptionPreTax:u,stockOptionTax:c,stockOptionAfterTax:u-c,stockOptionIncome:d,stockOptionBuybackMonth:r}}function c(e){var n=e.salary,t=e.specialAdditionalDeduction,r=e.yearEndAwardsNumber,c=e.yearEndAwards,d=e.insuranceAndFundBase,l=e.startingSalary,f=e.insuranceAndFundRate,p=e.insuranceAndFundRateOfCompany,x=e.signingBonus,y=e.housingFundRange,h=e.stockOption,v=e.stock;x=function(e){if("number"==typeof e){var n=e;(e=new Array(12)).fill(n)}else for(var t=e.length;t<12;t++)e[t]=0;return e}(x);var m=u(h),b=function(e){var n=e.value;if(n<=0)return{stockPreTax:0,stockTax:0,stockAfterTax:0};for(var t=n,a=0,r=0,i=0,o=[{value:36e3,rate:.03,deduction:0},{value:144e3,rate:.1,deduction:2520},{value:3e5,rate:.2,deduction:16920},{value:42e4,rate:.25,deduction:31920},{value:66e4,rate:.3,deduction:52920},{value:96e4,rate:.35,deduction:85920},{value:0,rate:.45,deduction:181920}];i<o.length;i++){var s=o[i];if(0===s.value||t<=s.value){a=s.rate,r=s.deduction;break}}var u=t*a-r;return{stockPreTax:t,stockTax:Math.max(0,u),stockAfterTax:t-Math.max(0,u)}}(v);!h.separateTax&&m.stockOptionIncome>0&&(x[Math.min(Math.max(h.buybackMonth-1,0),11)]+=m.stockOptionIncome);var T=function(e){var n=e.salary,t=e.insuranceAndFundBase,a=e.insuranceAndFundRate,r=e.insuranceAndFundRateOfCompany;t||(t=n);var i=Object.assign({},r);-1===i.housingFund&&(i.housingFund=a.housingFund);-1===i.supplementaryFund&&(i.supplementaryFund=a.supplementaryFund);return{insuranceAndFundBase:t,insuranceAndFundRateOfCompany:i}}({salary:n,insuranceAndFundBase:d,insuranceAndFundRate:f,insuranceAndFundRateOfCompany:p});d=T.insuranceAndFundBase,p=T.insuranceAndFundRateOfCompany;var A,g=s({salary:n,yearEndAwards:c,yearEndAwardsNumber:r,startingSalary:l}),k=g.awardsPreTax,F=g.awardsTax,w=g.awardsAfterTax,_=a({insuranceAndFundBase:d,insuranceAndFundRate:f,housingFundRange:y}),I=a({insuranceAndFundBase:d,insuranceAndFundRate:p,housingFundRange:y}),C=function(e){for(var n=e.salary,t=e.signingBonus,a=e.startingSalary,r=e.specialAdditionalDeduction,s=e.totalFund,u=e.awardsAfterTax,c=[],d=[],l=0,f=0,p=1;p<13;p++){var x=t[p-1]||0,y=o({accumulatedTaxableIncome:p*n+(f+=x)-0-a*p-s*p-r*p-0,totalPersonalTncomeTax:l}),h=n+x-s-y;c.push(h),d.push(y),l+=y}var v=i(c),m=i(d);return{salaryAfterTax:c,salaryTax:d,totalSalaryAfterTaxExcludeAwards:v,salaryTotalTax:m,totalSalaryAfterTax:v+u}}({salary:n,signingBonus:x,startingSalary:l,specialAdditionalDeduction:t,totalFund:_.totalFund,awardsAfterTax:w}),O=C.salaryAfterTax,S=C.salaryTax,R=C.totalSalaryAfterTaxExcludeAwards,P=C.salaryTotalTax,E=C.totalSalaryAfterTax;return{salaryBase:n,salaryPreTax:x.map((function(e){return e+n})),salaryAfterTax:O,salaryAfterTaxAvg:(A=O,i(A)/A.length),salaryTax:S,salaryTotalTax:P,totalSalaryAfterTaxExcludeAwards:R,totalSalaryPreTax:k+12*n+i(x)+(h.separateTax?m.stockOptionPreTax:0)+b.stockPreTax,totalSalaryAfterTax:E+(h.separateTax?m.stockOptionAfterTax:0)+b.stockAfterTax,insuranceAndFund:_,insuranceAndFundOfCompany:I,awardsPreTax:k,awardsTax:F,awardsAfterTax:w,stockOptionPreTax:m.stockOptionPreTax,stockOptionTax:m.stockOptionTax,stockOptionAfterTax:m.stockOptionAfterTax,stockPreTax:b.stockPreTax,stockTax:b.stockTax,stockAfterTax:b.stockAfterTax}}t.r(n);var d,l=function(){function e(e){for(var n in void 0===e&&(e={}),this.salary=1e4,this.specialAdditionalDeduction=0,this.yearEndAwardsNumber=2,this.yearEndAwards=0,this.insuranceAndFundBase=0,this.startingSalary=5e3,this.insuranceAndFundRate={pension:.08,medicalInsurance:.02,unemploymentInsurance:.005,maternityInsurance:0,injuryInsurance:0,housingFund:.07,supplementaryFund:.05},this.insuranceAndFundRateOfCompany={pension:.21,medicalInsurance:.11,unemploymentInsurance:.015,maternityInsurance:.01,injuryInsurance:.01,housingFund:-1,supplementaryFund:-1},this.signingBonus=[],this.housingFundRange={min:2590,max:34188},this.stockOption={value:0,separateTax:!1,vesting:[],buybackMonth:12},this.stock={value:0},e){var t=n;"object"==typeof e[t]?Object.assign(this[t],e[t]):void 0!==e[t]&&(this[t]=e[t])}}return e.prototype.calculate=function(){return this.salaryResult=c(this),this.salaryResult},e}();function f(e,n){void 0===n&&(n=2e3),d||((d=window.document.createElement("div")).setAttribute("style","\n        position: fixed;\n        left: 0;\n        top: 0;\n    "),window.document.body.appendChild(d));var t=window.document.createElement("span");t.setAttribute("style","background-color: rgba(0,0,0,.8);\n    padding: 3px 6px;\n    border-radius: 3px;\n    color: #fff;\n    left: 50%;\n    position: fixed;\n    top: 50%;\n    transform: translate(-50%, -50%);"),t.innerText=e,d.appendChild(t),window.setTimeout((function(){d.removeChild(t)}),n)}var p={salary:{nec:!0,base:!0,text:"月基础工资",unit:"元",info:"每月税前月薪金额"},yearEndAwardsNumber:{nec:!0,base:!0,text:"年终奖月数",unit:"个月",info:"年终奖发几个月的"},yearEndAwards:{nec:!0,base:!0,text:"年终奖总额",unit:"元",info:"年终奖总金额，如果填写该项，计算优先级会高于年终奖月数，当为0时则使用yearEndAwardsNumber计算"},specialAdditionalDeduction:{nec:!0,base:!0,text:"每月专项附加扣除",unit:"元",info:"详情请见个税APP或工资单流水中"},signingBonus:{base:!0,nec:!0,text:"签字费(可按月)",unit:"元",info:"每个月额外奖金，如果需要分12个月单独填写，请使用空格分开"},stockOption:{text:"期权",nec:!0,value:{nec:!0,base:!0,text:"每年期权价值",unit:"元",info:"年度期权总价值"},separateTax:{nec:!0,base:!0,text:"期权单独计税",unit:"",info:"是否按20%单独计税，否则计入工资累计计税。输入1为是，0为否"},vesting:{nec:!0,base:!0,text:"期权月归属比例",unit:"%",info:"12个月归属比例，用空格分隔，总和不超过100"},buybackMonth:{nec:!0,base:!0,text:"期权回购月份",unit:"月",info:"期权回购月份(1-12)"}},stock:{text:"股票",nec:!0,value:{nec:!0,base:!0,text:"每年股票价值",unit:"元",info:"年度股票总价值"}},insuranceAndFundRate:{text:"五险一金个人缴纳部分",nec:!0,pension:{base:!0,text:"养老保险个人缴纳百分比",info:""},medicalInsurance:{base:!0,text:"医疗保险个人缴纳百分比",info:""},unemploymentInsurance:{base:!0,text:"失业保险个人缴纳百分比",info:"个人一般无需缴纳"},injuryInsurance:{base:!0,text:"工伤保险个人缴纳百分比",info:"个人一般无需缴纳"},maternityInsurance:{base:!0,text:"生育保险个人缴纳百分比",info:"个人一般无需缴纳"},housingFund:{nec:!0,base:!0,text:"住房公积金个人缴纳百分比",info:""},supplementaryFund:{nec:!0,base:!0,text:"补充住房公积金个人缴纳百分比",info:""}},insuranceAndFundBase:{base:!0,text:"五险一金计算基数",unit:"元",info:"五险一金的缴费基数以员工上年度平均工资",url:"https://zhidao.baidu.com/question/464011354624682485.html"},startingSalary:{base:!0,text:"个人所得税起征点",unit:"元",info:""},insuranceAndFundRateOfCompany:{text:"五险一金公司缴纳部分",pension:{base:!0,text:"养老保险公司缴纳百分比",info:""},medicalInsurance:{base:!0,text:"医疗保险公司缴纳百分比",info:""},unemploymentInsurance:{base:!0,text:"失业保险公司缴纳百分比",info:""},injuryInsurance:{base:!0,text:"工伤保险公司缴纳百分比",info:""},maternityInsurance:{base:!0,text:"生育保险公司缴纳百分比",info:""},housingFund:{base:!0,text:"住房公积金公司缴纳百分比",info:"当填-1时表示与个人缴纳部分一致"},supplementaryFund:{base:!0,text:"补充住房公积金公司缴纳百分比",info:"当填-1时表示与个人缴纳部分一致"}},housingFundRange:{text:"公积金上下限",min:{base:!0,text:"下限",unit:"元",info:"公积金计算的月薪下限",url:"http://news.sohu.com/a/564484736_121117448"},max:{base:!0,text:"上限",unit:"元",info:"公积金计算的月薪上限",url:"http://news.sohu.com/a/564484736_121117448"}}},x={totalSalaryPreTax:{base:!0,text:"年总税前收入",info:"一年总税前收入"},totalSalaryAfterTax:{base:!0,text:"年总税后收入",info:"一年总税后收入"},totalSalaryAfterTaxExcludeAwards:{base:!0,text:"年总税后收入(不含年终奖)",info:"年总税后收入(不含年终奖)"},salaryBase:{base:!0,text:"月基础工资",info:"月基础工资"},salaryPreTax:{base:!0,text:"每月税前收入",info:"12个月份税前月收入(含奖金津贴)"},salaryAfterTax:{base:!0,text:"每月税后收入",info:"12个月份税后收入"},salaryAfterTaxAvg:{base:!0,text:"每月平均税后输入",info:"12个月份平均税后收入"},salaryTax:{base:!0,text:"每月个人所得税",info:"12个月份个人所得税"},salaryTotalTax:{base:!0,text:"年总个人所得税",info:"一年个人所得税总额"},awardsPreTax:{base:!0,text:"年终奖税前金额",info:""},awardsTax:{base:!0,text:"年终奖个人所得税金额",info:""},awardsAfterTax:{base:!0,text:"年终奖税后金额",info:""},stockOptionPreTax:{base:!0,text:"期权税前金额",info:"期权回购时的税前金额"},stockOptionTax:{base:!0,text:"期权税额",info:"期权个人所得税金额"},stockOptionAfterTax:{base:!0,text:"期权税后金额",info:"期权回购后的税后金额"},stockPreTax:{base:!0,text:"股票税前金额",info:"股票收入的税前金额"},stockTax:{base:!0,text:"股票税额",info:"股票个人所得税金额"},stockAfterTax:{base:!0,text:"股票税后金额",info:"股票收入的税后金额"},insuranceAndFund:{text:"五险一金个人缴纳部分",pension:{base:!0,text:"养老保险个人缴纳金额",info:""},medicalInsurance:{base:!0,text:"医疗保险个人缴纳金额",info:""},unemploymentInsurance:{base:!0,text:"失业保险个人缴纳金额",info:""},injuryInsurance:{base:!0,text:"工伤保险个人缴纳金额",info:""},maternityInsurance:{base:!0,text:"生育保险个人缴纳金额",info:""},housingFund:{base:!0,text:"住房公积金个人缴纳金额",info:""},supplementaryFund:{base:!0,text:"补充住房公积金个人缴纳金额",info:""},totalFund:{base:!0,text:"五险一金个人缴纳总金额",info:""},totalHousingFund:{base:!0,text:"住房公积金个人缴纳总金额",info:""}},insuranceAndFundOfCompany:{text:"五险一金公司缴纳部分",pension:{base:!0,text:"养老保险公司缴纳金额",info:""},medicalInsurance:{base:!0,text:"医疗保险公司缴纳金额",info:""},unemploymentInsurance:{base:!0,text:"失业保险公司缴纳金额",info:""},injuryInsurance:{base:!0,text:"工伤保险公司缴纳金额",info:""},maternityInsurance:{base:!0,text:"生育保险公司缴纳金额",info:""},housingFund:{base:!0,text:"住房公积金公司缴纳金额",info:""},supplementaryFund:{base:!0,text:"补充住房公积金公司缴纳金额",info:""},totalFund:{base:!0,text:"五险一金公司缴纳总金额",info:""},totalHousingFund:{base:!0,text:"住房公积金个人缴纳总金额",info:""}}};new(function(){function e(){this.emitResultList=[],this.necEls=[],this.salary=new l,this.inputArea=window.document.querySelector(".input-area"),this.resultArea=window.document.querySelector(".result-area"),this._initInputUI(),this._initResultUI(),this._calculate()}return e.prototype._calculate=function(){this.salary.calculate(),this.emitResultList.forEach((function(e){return e()}))},e.prototype._initInputUI=function(){var e=this,n=this._createFragmentCommon({map:p,isInput:!0});this.inputArea.appendChild(n);var t=this._ce("div","input-more"),a=this._ce("span",""),r=this._ce("i","ei-tasks");t.appendChild(r),t.appendChild(a),a.innerText="五险一金详细信息",t.onclick=function(){"五险一金详细信息"===a.innerText?(a.innerText="收起五险一金详细信息",e.necEls.forEach((function(e){return e.classList.add("show")}))):(a.innerText="五险一金详细信息",e.necEls.forEach((function(e){return e.classList.remove("show")})))},this.inputArea.appendChild(t);var i=this._ce("button","calc-btn");i.innerText="计算",i.onclick=function(){e._calculate(),f("计算结果已更新")},this.inputArea.appendChild(i)},e.prototype._initResultUI=function(){var e=this._createFragmentCommon({map:x,isInput:!1});this.resultArea.appendChild(e)},e.prototype._createWrapper=function(e,n){var t=this._ce("div","salary-wrapper"),a=this._ce("div","salary-wrapper-title");return this._checkNec(t,n,e.nec),a.innerText=e.text,t.appendChild(a),t},e.prototype._checkNec=function(e,n,t){void 0===t&&(t=!1),n&&!t&&(e.classList.add("salary-not-nec"),this.necEls.push(e))},e.prototype._createSingleItem=function(e){var n=this,t=e.key,a=e.item,r=e.subKey,i=e.isInput,o=void 0===i||i,s=this._ce("div","salary-item"),u=this._ce("span","salary-title");u.innerText=a.text,s.appendChild(u);var c=this.salary;if(o){this._checkNec(s,o,a.nec);var d=c[t],l=["signingBonus"].includes(t)||[{key:"stockOption",subKey:"vesting"}].some((function(e){return e.key===t&&e.subKey===r}));if([{key:"stockOption",subKey:"separateTax"}].some((function(e){return e.key===t&&e.subKey===r}))){var p=this._ce("input","salary-checkbox");if(p.type="checkbox",p.checked=r?d[r]:d,p.onchange=function(){r?c[t][r]=p.checked:c[t]=p.checked},s.appendChild(p),a.info||a.url){var x=this._ce("i","ei-info-sign"),y=a.info||"查看详情";x.title=y,a.url?x.onclick=function(){window.open(a.url.substring(4))}:x.onclick=function(){f(y||"",5e3)},s.appendChild(x)}}else if(l){if(a.info||a.url){x=this._ce("i","ei-info-sign");var h=a.info||"查看详情";x.title=h,a.url?x.onclick=function(){window.open(a.url.substring(4))}:x.onclick=function(){f(h||"",5e3)},s.appendChild(x)}var v=this._ce("div","array-container"),m=this._ce("div","array-entries");v.appendChild(m);var b=r?d[r]:d,T=function(){var e=new Array(12).fill(0);m.querySelectorAll(".array-row").forEach((function(n){var t=n.querySelector(".array-month"),a=n.querySelector(".array-value"),r=parseInt(t.value)-1,i=parseFloat(a.value)||0;r>=0&&r<12&&(e[r]=i)})),r?c[t][r]=e:c[t]=e},A=function(e,t){void 0===e&&(e=1),void 0===t&&(t=0);for(var r=n._ce("div","array-row"),i=n._ce("select","array-month"),o=1;o<=12;o++){var s=n._ce("option");s.value=String(o),s.innerText=o+"月",i.appendChild(s)}i.value=String(e),i.onchange=T;var u=n._ce("input","array-value");u.type="number",u.value=String(t),u.onchange=T;var c=n._ce("span","array-unit");c.innerText=a.unit||"";var d=n._ce("span","array-del");d.innerText="×",d.onclick=function(){r.remove(),T()},r.appendChild(i),r.appendChild(u),r.appendChild(c),r.appendChild(d),m.appendChild(r)};Array.isArray(b)&&b.forEach((function(e,n){0!==e&&A(n+1,e)}));var g=this._ce("span","array-add");g.innerText="+",g.onclick=function(){return A()},v.appendChild(g),s.appendChild(v)}else{var k=this._ce("input","salary-input");if(k.value=r?d[r]:d,k.type="number",k.onchange=function(){var e=parseFloat(k.value);r?c[t][r]=e:c[t]=e},s.appendChild(k),a.unit){var F=this._ce("span","salary-unit");F.innerText=a.unit,s.appendChild(F)}if(a.info||a.url){x=this._ce("i","ei-info-sign");var w=a.info||"查看详情";x.title=w,a.url?x.onclick=function(){window.open(a.url.substring(4))}:x.onclick=function(){f(w||"",5e3)},s.appendChild(x)}}}else{var _=this._ce("span","salary-result");if(this.emitResultList.push((function(){var e=c.salaryResult,n=r?e[t][r]:e[t];"number"==typeof n?n=n.toFixed(2)+"元":n instanceof Array&&(n=n.map((function(e,n){return"["+(n+1)+"月:"+e.toFixed(2)+"元]"})).join(" ")),_.innerText=n})),s.appendChild(_),a.info||a.url){x=this._ce("i","ei-info-sign");var I=a.info||"查看详情";x.title=I,a.url?x.onclick=function(){window.open(a.url.substring(4))}:x.onclick=function(){f(I||"",5e3)},s.appendChild(x)}}return s},e.prototype._createFragmentCommon=function(e){var n=e.map,t=e.isInput,a=void 0===t||t,r=window.document.createDocumentFragment();for(var i in n){var o=n[i],s=void 0;if(o.base)s=this._createSingleItem({key:i,item:o,isInput:a});else for(var u in s=this._createWrapper(o,a),o){var c=o[u];"text"!==u&&"nec"!==u&&s.appendChild(this._createSingleItem({key:i,subKey:u,item:c,isInput:a}))}r.appendChild(s)}return r},e.prototype._ce=function(e,n){void 0===n&&(n="");var t=window.document.createElement(e);return n&&(t.className=n),t},e}())}]);