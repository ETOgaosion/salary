!function(n){var e={};function t(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return n[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=n,t.c=e,t.d=function(n,e,a){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:a})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(a,r,function(e){return n[e]}.bind(null,r));return a},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){"use strict";function a(n){var e=n.insuranceAndFundBase,t=n.insuranceAndFundRate,a=n.housingFundRange,r={totalFund:0};for(var i in t){var s=i,o=e;"housingFund"!==s&&"supplementaryFund"!==s||(e<a.min?o=a.min:e>a.max&&(o=a.max));var u=t[s]*o;r[s]=u,r.totalFund+=u}return r.totalHousingFund=r.housingFund+r.supplementaryFund,r}function r(n,e){for(var t=0;t<e.length;t++){var a=e[t],r=a.value,i=a.rate,s=a.deduction;if(0===r||r>n)return{rate:i,deduction:s}}return{rate:0,deduction:0}}function i(n){return n.reduce((function(n,e){return n+e}),0)}function s(n){var e=n.accumulatedTaxableIncome,t=n.totalPersonalTncomeTax,a=function(n){return r(n,[{value:36e3,rate:.03,deduction:0},{value:144e3,rate:.1,deduction:2520},{value:3e5,rate:.2,deduction:16920},{value:42e4,rate:.25,deduction:31920},{value:66e4,rate:.3,deduction:52920},{value:96e4,rate:.35,deduction:85920},{value:0,rate:.45,deduction:181920}])}(e);return e*a.rate-a.deduction-0-t}function o(n){var e=n.salary,t=n.yearEndAwards,a=n.yearEndAwardsNumber,i=n.startingSalary,s=t||e*a,o=e>i?s:s-(i-e),u=r(o/12,[{value:3e3,rate:.03,deduction:0},{value:12e3,rate:.1,deduction:210},{value:25e3,rate:.2,deduction:1410},{value:35e3,rate:.25,deduction:2660},{value:55e3,rate:.3,deduction:4410},{value:8e4,rate:.35,deduction:7360},{value:0,rate:.45,deduction:15160}]),c=o*u.rate-u.deduction;return{awardsPreTax:s,awardsTax:c,awardsAfterTax:s-c}}function u(n){for(var e=n.value,t=n.separateTax,a=n.vesting,r=n.buybackMonth,i=function(n){if("number"==typeof n){var e=n;(n=new Array(12)).fill(e/12)}else for(var t=n.length;t<12;t++)n[t]=0;return n}(a),s=0,o=0;o<r&&o<12;o++)s+=i[o];var u=e*(s=Math.min(s,100))/100,c=0,d=0;return t?c=.2*u:d=u,{stockOptionPreTax:u,stockOptionTax:c,stockOptionAfterTax:u-c,stockOptionIncome:d,stockOptionBuybackMonth:r}}function c(n){var e=n.salary,t=n.specialAdditionalDeduction,r=n.yearEndAwardsNumber,c=n.yearEndAwards,d=n.insuranceAndFundBase,l=n.startingSalary,p=n.insuranceAndFundRate,f=n.insuranceAndFundRateOfCompany,y=n.signingBonus,x=n.housingFundRange,h=n.stockOption;y=function(n){if("number"==typeof n){var e=n;(n=new Array(12)).fill(e)}else for(var t=n.length;t<12;t++)n[t]=0;return n}(y);var m=u(h);!h.separateTax&&m.stockOptionIncome>0&&(y[Math.min(Math.max(h.buybackMonth-1,0),11)]+=m.stockOptionIncome);var v=function(n){var e=n.salary,t=n.insuranceAndFundBase,a=n.insuranceAndFundRate,r=n.insuranceAndFundRateOfCompany;t||(t=e);var i=Object.assign({},r);-1===i.housingFund&&(i.housingFund=a.housingFund);-1===i.supplementaryFund&&(i.supplementaryFund=a.supplementaryFund);return{insuranceAndFundBase:t,insuranceAndFundRateOfCompany:i}}({salary:e,insuranceAndFundBase:d,insuranceAndFundRate:p,insuranceAndFundRateOfCompany:f});d=v.insuranceAndFundBase,f=v.insuranceAndFundRateOfCompany;var b,A=o({salary:e,yearEndAwards:c,yearEndAwardsNumber:r,startingSalary:l}),g=A.awardsPreTax,T=A.awardsTax,F=A.awardsAfterTax,w=a({insuranceAndFundBase:d,insuranceAndFundRate:p,housingFundRange:x}),k=a({insuranceAndFundBase:d,insuranceAndFundRate:f,housingFundRange:x}),_=function(n){for(var e=n.salary,t=n.signingBonus,a=n.startingSalary,r=n.specialAdditionalDeduction,o=n.totalFund,u=n.awardsAfterTax,c=[],d=[],l=0,p=0,f=1;f<13;f++){var y=t[f-1]||0,x=s({accumulatedTaxableIncome:f*e+(p+=y)-0-a*f-o*f-r*f-0,totalPersonalTncomeTax:l}),h=e+y-o-x;c.push(h),d.push(x),l+=x}var m=i(c),v=i(d);return{salaryAfterTax:c,salaryTax:d,totalSalaryAfterTaxExcludeAwards:m,salaryTotalTax:v,totalSalaryAfterTax:m+u}}({salary:e,signingBonus:y,startingSalary:l,specialAdditionalDeduction:t,totalFund:w.totalFund,awardsAfterTax:F}),I=_.salaryAfterTax,C=_.salaryTax,O=_.totalSalaryAfterTaxExcludeAwards,S=_.salaryTotalTax,R=_.totalSalaryAfterTax;return{salaryBase:e,salaryPreTax:y.map((function(n){return n+e})),salaryAfterTax:I,salaryAfterTaxAvg:(b=I,i(b)/b.length),salaryTax:C,salaryTotalTax:S,totalSalaryAfterTaxExcludeAwards:O,totalSalaryPreTax:g+12*e+i(y)+(h.separateTax?m.stockOptionPreTax:0),totalSalaryAfterTax:R+(h.separateTax?m.stockOptionAfterTax:0),insuranceAndFund:w,insuranceAndFundOfCompany:k,awardsPreTax:g,awardsTax:T,awardsAfterTax:F,stockOptionPreTax:m.stockOptionPreTax,stockOptionTax:m.stockOptionTax,stockOptionAfterTax:m.stockOptionAfterTax}}t.r(e);var d,l=function(){function n(n){for(var e in void 0===n&&(n={}),this.salary=1e4,this.specialAdditionalDeduction=0,this.yearEndAwardsNumber=2,this.yearEndAwards=0,this.insuranceAndFundBase=0,this.startingSalary=5e3,this.insuranceAndFundRate={pension:.08,medicalInsurance:.02,unemploymentInsurance:.005,maternityInsurance:0,injuryInsurance:0,housingFund:.07,supplementaryFund:.05},this.insuranceAndFundRateOfCompany={pension:.21,medicalInsurance:.11,unemploymentInsurance:.015,maternityInsurance:.01,injuryInsurance:.01,housingFund:-1,supplementaryFund:-1},this.signingBonus=[],this.housingFundRange={min:2590,max:34188},this.stockOption={value:0,separateTax:!1,vesting:[],buybackMonth:12},n){var t=e;"object"==typeof n[t]?Object.assign(this[t],n[t]):void 0!==n[t]&&(this[t]=n[t])}}return n.prototype.calculate=function(){return this.salaryResult=c(this),this.salaryResult},n}();function p(n,e){void 0===e&&(e=2e3),d||((d=window.document.createElement("div")).setAttribute("style","\n        position: fixed;\n        left: 0;\n        top: 0;\n    "),window.document.body.appendChild(d));var t=window.document.createElement("span");t.setAttribute("style","background-color: rgba(0,0,0,.8);\n    padding: 3px 6px;\n    border-radius: 3px;\n    color: #fff;\n    left: 50%;\n    position: fixed;\n    top: 50%;\n    transform: translate(-50%, -50%);"),t.innerText=n,d.appendChild(t),window.setTimeout((function(){d.removeChild(t)}),e)}var f={salary:{nec:!0,base:!0,text:"月基础工资",unit:"元",info:"每月税前月薪金额"},yearEndAwardsNumber:{nec:!0,base:!0,text:"年终奖月数",unit:"个月",info:"年终奖发几个月的"},yearEndAwards:{nec:!0,base:!0,text:"年终奖总额",unit:"元",info:"年终奖总金额，如果填写该项，计算优先级会高于年终奖月数，当为0时则使用yearEndAwardsNumber计算"},specialAdditionalDeduction:{nec:!0,base:!0,text:"每月专项附加扣除",unit:"元",info:"详情请见个税APP或工资单流水中"},signingBonus:{base:!0,nec:!0,text:"签字费(可按月)",unit:"元",info:"每个月额外奖金，如果需要分12个月单独填写，请使用空格分开"},stockOption:{text:"期权",nec:!0,value:{nec:!0,base:!0,text:"每年期权价值",unit:"元",info:"年度期权总价值"},separateTax:{nec:!0,base:!0,text:"期权单独计税",unit:"",info:"是否按20%单独计税，否则计入工资累计计税。输入1为是，0为否"},vesting:{nec:!0,base:!0,text:"期权月归属比例",unit:"%",info:"12个月归属比例，用空格分隔，总和不超过100"},buybackMonth:{nec:!0,base:!0,text:"期权回购月份",unit:"月",info:"期权回购月份(1-12)"}},insuranceAndFundRate:{text:"五险一金个人缴纳部分",nec:!0,pension:{base:!0,text:"养老保险个人缴纳百分比",info:""},medicalInsurance:{base:!0,text:"医疗保险个人缴纳百分比",info:""},unemploymentInsurance:{base:!0,text:"失业保险个人缴纳百分比",info:"个人一般无需缴纳"},injuryInsurance:{base:!0,text:"工伤保险个人缴纳百分比",info:"个人一般无需缴纳"},maternityInsurance:{base:!0,text:"生育保险个人缴纳百分比",info:"个人一般无需缴纳"},housingFund:{nec:!0,base:!0,text:"住房公积金个人缴纳百分比",info:""},supplementaryFund:{nec:!0,base:!0,text:"补充住房公积金个人缴纳百分比",info:""}},insuranceAndFundBase:{base:!0,text:"五险一金计算基数",unit:"元",info:"五险一金的缴费基数以员工上年度平均工资",url:"https://zhidao.baidu.com/question/464011354624682485.html"},startingSalary:{base:!0,text:"个人所得税起征点",unit:"元",info:""},insuranceAndFundRateOfCompany:{text:"五险一金公司缴纳部分",pension:{base:!0,text:"养老保险公司缴纳百分比",info:""},medicalInsurance:{base:!0,text:"医疗保险公司缴纳百分比",info:""},unemploymentInsurance:{base:!0,text:"失业保险公司缴纳百分比",info:""},injuryInsurance:{base:!0,text:"工伤保险公司缴纳百分比",info:""},maternityInsurance:{base:!0,text:"生育保险公司缴纳百分比",info:""},housingFund:{base:!0,text:"住房公积金公司缴纳百分比",info:"当填-1时表示与个人缴纳部分一致"},supplementaryFund:{base:!0,text:"补充住房公积金公司缴纳百分比",info:"当填-1时表示与个人缴纳部分一致"}},housingFundRange:{text:"公积金上下限",min:{base:!0,text:"下限",unit:"元",info:"公积金计算的月薪下限",url:"http://news.sohu.com/a/564484736_121117448"},max:{base:!0,text:"上限",unit:"元",info:"公积金计算的月薪上限",url:"http://news.sohu.com/a/564484736_121117448"}}},y={totalSalaryPreTax:{base:!0,text:"年总税前收入",info:"一年总税前收入"},totalSalaryAfterTax:{base:!0,text:"年总税后收入",info:"一年总税后收入"},totalSalaryAfterTaxExcludeAwards:{base:!0,text:"年总税后收入(不含年终奖)",info:"年总税后收入(不含年终奖)"},salaryBase:{base:!0,text:"月基础工资",info:"月基础工资"},salaryPreTax:{base:!0,text:"每月税前收入",info:"12个月份税前月收入(含奖金津贴)"},salaryAfterTax:{base:!0,text:"每月税后收入",info:"12个月份税后收入"},salaryAfterTaxAvg:{base:!0,text:"每月平均税后输入",info:"12个月份平均税后收入"},salaryTax:{base:!0,text:"每月个人所得税",info:"12个月份个人所得税"},salaryTotalTax:{base:!0,text:"年总个人所得税",info:"一年个人所得税总额"},awardsPreTax:{base:!0,text:"年终奖税前金额",info:""},awardsTax:{base:!0,text:"年终奖个人所得税金额",info:""},awardsAfterTax:{base:!0,text:"年终奖税后金额",info:""},stockOptionPreTax:{base:!0,text:"期权税前金额",info:"期权回购时的税前金额"},stockOptionTax:{base:!0,text:"期权税额",info:"期权个人所得税金额"},stockOptionAfterTax:{base:!0,text:"期权税后金额",info:"期权回购后的税后金额"},insuranceAndFund:{text:"五险一金个人缴纳部分",pension:{base:!0,text:"养老保险个人缴纳金额",info:""},medicalInsurance:{base:!0,text:"医疗保险个人缴纳金额",info:""},unemploymentInsurance:{base:!0,text:"失业保险个人缴纳金额",info:""},injuryInsurance:{base:!0,text:"工伤保险个人缴纳金额",info:""},maternityInsurance:{base:!0,text:"生育保险个人缴纳金额",info:""},housingFund:{base:!0,text:"住房公积金个人缴纳金额",info:""},supplementaryFund:{base:!0,text:"补充住房公积金个人缴纳金额",info:""},totalFund:{base:!0,text:"五险一金个人缴纳总金额",info:""},totalHousingFund:{base:!0,text:"住房公积金个人缴纳总金额",info:""}},insuranceAndFundOfCompany:{text:"五险一金公司缴纳部分",pension:{base:!0,text:"养老保险公司缴纳金额",info:""},medicalInsurance:{base:!0,text:"医疗保险公司缴纳金额",info:""},unemploymentInsurance:{base:!0,text:"失业保险公司缴纳金额",info:""},injuryInsurance:{base:!0,text:"工伤保险公司缴纳金额",info:""},maternityInsurance:{base:!0,text:"生育保险公司缴纳金额",info:""},housingFund:{base:!0,text:"住房公积金公司缴纳金额",info:""},supplementaryFund:{base:!0,text:"补充住房公积金公司缴纳金额",info:""},totalFund:{base:!0,text:"五险一金公司缴纳总金额",info:""},totalHousingFund:{base:!0,text:"住房公积金个人缴纳总金额",info:""}}};new(function(){function n(){this.emitResultList=[],this.necEls=[],this.salary=new l,this.inputArea=window.document.querySelector(".input-area"),this.resultArea=window.document.querySelector(".result-area"),this._initInputUI(),this._initResultUI(),this._calculate()}return n.prototype._calculate=function(){this.salary.calculate(),this.emitResultList.forEach((function(n){return n()}))},n.prototype._initInputUI=function(){var n=this,e=this._createFragmentCommon({map:f,isInput:!0});this.inputArea.appendChild(e);var t=this._ce("div","input-more"),a=this._ce("span",""),r=this._ce("i","ei-tasks");t.appendChild(r),t.appendChild(a),a.innerText="五险一金详细信息",t.onclick=function(){"五险一金详细信息"===a.innerText?(a.innerText="收起五险一金详细信息",n.necEls.forEach((function(n){return n.classList.add("show")}))):(a.innerText="五险一金详细信息",n.necEls.forEach((function(n){return n.classList.remove("show")})))},this.inputArea.appendChild(t);var i=this._ce("button","calc-btn");i.innerText="计算",i.onclick=function(){n._calculate(),p("计算结果已更新")},this.inputArea.appendChild(i)},n.prototype._initResultUI=function(){var n=this._createFragmentCommon({map:y,isInput:!1});this.resultArea.appendChild(n)},n.prototype._createWrapper=function(n,e){var t=this._ce("div","salary-wrapper"),a=this._ce("div","salary-wrapper-title");return this._checkNec(t,e,n.nec),a.innerText=n.text,t.appendChild(a),t},n.prototype._checkNec=function(n,e,t){void 0===t&&(t=!1),e&&!t&&(n.classList.add("salary-not-nec"),this.necEls.push(n))},n.prototype._createSingleItem=function(n){var e=this,t=n.key,a=n.item,r=n.subKey,i=n.isInput,s=void 0===i||i,o=this._ce("div","salary-item"),u=this._ce("span","salary-title");u.innerText=a.text,o.appendChild(u);var c=this.salary;if(s){this._checkNec(o,s,a.nec);var d=c[t],l=["signingBonus"].includes(t)||[{key:"stockOption",subKey:"vesting"}].some((function(n){return n.key===t&&n.subKey===r}));if([{key:"stockOption",subKey:"separateTax"}].some((function(n){return n.key===t&&n.subKey===r}))){var f=this._ce("input","salary-checkbox");if(f.type="checkbox",f.checked=r?d[r]:d,f.onchange=function(){r?c[t][r]=f.checked:c[t]=f.checked},o.appendChild(f),a.info||a.url){var y=this._ce("i","ei-info-sign"),x=a.info||"查看详情";y.title=x,a.url?y.onclick=function(){window.open(a.url.substring(4))}:y.onclick=function(){p(x||"",5e3)},o.appendChild(y)}}else if(l){if(a.info||a.url){y=this._ce("i","ei-info-sign");var h=a.info||"查看详情";y.title=h,a.url?y.onclick=function(){window.open(a.url.substring(4))}:y.onclick=function(){p(h||"",5e3)},o.appendChild(y)}var m=this._ce("div","array-container"),v=this._ce("div","array-entries");m.appendChild(v);var b=r?d[r]:d,A=function(){var n=new Array(12).fill(0);v.querySelectorAll(".array-row").forEach((function(e){var t=e.querySelector(".array-month"),a=e.querySelector(".array-value"),r=parseInt(t.value)-1,i=parseFloat(a.value)||0;r>=0&&r<12&&(n[r]=i)})),r?c[t][r]=n:c[t]=n},g=function(n,t){void 0===n&&(n=1),void 0===t&&(t=0);for(var r=e._ce("div","array-row"),i=e._ce("select","array-month"),s=1;s<=12;s++){var o=e._ce("option");o.value=String(s),o.innerText=s+"月",i.appendChild(o)}i.value=String(n),i.onchange=A;var u=e._ce("input","array-value");u.type="number",u.value=String(t),u.onchange=A;var c=e._ce("span","array-unit");c.innerText=a.unit||"";var d=e._ce("span","array-del");d.innerText="×",d.onclick=function(){r.remove(),A()},r.appendChild(i),r.appendChild(u),r.appendChild(c),r.appendChild(d),v.appendChild(r)};Array.isArray(b)&&b.forEach((function(n,e){0!==n&&g(e+1,n)}));var T=this._ce("span","array-add");T.innerText="+",T.onclick=function(){return g()},m.appendChild(T),o.appendChild(m)}else{var F=this._ce("input","salary-input");if(F.value=r?d[r]:d,F.type="number",F.onchange=function(){var n=parseFloat(F.value);r?c[t][r]=n:c[t]=n},o.appendChild(F),a.unit){var w=this._ce("span","salary-unit");w.innerText=a.unit,o.appendChild(w)}if(a.info||a.url){y=this._ce("i","ei-info-sign");var k=a.info||"查看详情";y.title=k,a.url?y.onclick=function(){window.open(a.url.substring(4))}:y.onclick=function(){p(k||"",5e3)},o.appendChild(y)}}}else{var _=this._ce("span","salary-result");if(this.emitResultList.push((function(){var n=c.salaryResult,e=r?n[t][r]:n[t];"number"==typeof e?e=e.toFixed(2)+"元":e instanceof Array&&(e=e.map((function(n,e){return"["+(e+1)+"月:"+n.toFixed(2)+"元]"})).join(" ")),_.innerText=e})),o.appendChild(_),a.info||a.url){y=this._ce("i","ei-info-sign");var I=a.info||"查看详情";y.title=I,a.url?y.onclick=function(){window.open(a.url.substring(4))}:y.onclick=function(){p(I||"",5e3)},o.appendChild(y)}}return o},n.prototype._createFragmentCommon=function(n){var e=n.map,t=n.isInput,a=void 0===t||t,r=window.document.createDocumentFragment();for(var i in e){var s=e[i],o=void 0;if(s.base)o=this._createSingleItem({key:i,item:s,isInput:a});else for(var u in o=this._createWrapper(s,a),s){var c=s[u];"text"!==u&&"nec"!==u&&o.appendChild(this._createSingleItem({key:i,subKey:u,item:c,isInput:a}))}r.appendChild(o)}return r},n.prototype._ce=function(n,e){void 0===e&&(e="");var t=window.document.createElement(n);return e&&(t.className=e),t},n}())}]);